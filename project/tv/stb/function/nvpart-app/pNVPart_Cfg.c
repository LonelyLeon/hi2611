#include "dTypes.h"
#include "dNVPart.h"
#include "dNVPart_Cfg.h"
#include "pCustomConfig.h"

#if defined(D_FLASH_MAP_8M)
static const D_NVPartCfg def_part_cfg[]=
	{
		{(D_U8)D_NV_PART_APP,         0x01, 0x00, D_NV_PART_TYPE_ZIP_APP, 0x00400000},
		{(D_U8)D_NV_PART_RESERVED,    0x01, 0x00, D_NV_PART_TYPE_DATA,    0x00140000}, 
		{(D_U8)D_NV_PART_PROG,        0x01, 0x01, D_NV_PART_TYPE_DATA,    0x00010000},
		{(D_U8)D_NV_PART_PROG2,       0x01, 0x01, D_NV_PART_TYPE_DATA,    0x00010000},
		{(D_U8)D_NV_PART_PARAM,       0x01, 0x01, D_NV_PART_TYPE_DATA,    0x00010000},
		{(D_U8)D_NV_PART_BAK,         0x01, 0x00, D_NV_PART_TYPE_DATA,    0x00010000},
		{(D_U8)D_NV_PART_CA1,         0x01, 0x00, D_NV_PART_TYPE_DATA,    0x00010000},
		{(D_U8)D_NV_PART_CA2,         0x01, 0x00, D_NV_PART_TYPE_DATA,    0x00010000},
		{(D_U8)D_NV_PART_CA3,         0x01, 0x00, D_NV_PART_TYPE_DATA,    0x00010000},
		{(D_U8)D_NV_PART_MAIL,        0x01, 0x00, D_NV_PART_TYPE_DATA,    0x00010000},
		{(D_U8)D_NV_PART_DATA,        0x01, 0x00, D_NV_PART_TYPE_DATA,    0x00010000},
		{(D_U8)D_NV_PART_RSET,        0x01, 0x00, D_NV_PART_TYPE_DATA,    0x00010000},
		{(D_U8)D_NV_PART_LOGO,        0x01, 0x00, D_NV_PART_TYPE_DATA,    0x00010000},
		{(D_U8)D_NV_PART_ADVERTISE,   0x01, 0x00, D_NV_PART_TYPE_DATA,    0x00100000},
	};
#elif defined(D_FLASH_MAP_4M_2)
static const D_NVPartCfg def_part_cfg[]=
	{
		{(D_U8)D_NV_PART_APP,         0x01, 0x00, D_NV_PART_TYPE_ZIP_APP, 0x00280000},
		{(D_U8)D_NV_PART_PROG,        0x01, 0x01, D_NV_PART_TYPE_DATA,    0x00010000},
		{(D_U8)D_NV_PART_PROG2,       0x01, 0x01, D_NV_PART_TYPE_DATA,    0x00010000},
		{(D_U8)D_NV_PART_PARAM,       0x01, 0x01, D_NV_PART_TYPE_DATA,    0x00010000},
		{(D_U8)D_NV_PART_BAK,         0x01, 0x00, D_NV_PART_TYPE_DATA,    0x00010000},
		{(D_U8)D_NV_PART_RSET,        0x01, 0x00, D_NV_PART_TYPE_DATA,    0x00010000},
		{(D_U8)D_NV_PART_CA1,         0x01, 0x00, D_NV_PART_TYPE_DATA,    0x00010000},
		{(D_U8)D_NV_PART_CA2,         0x01, 0x00, D_NV_PART_TYPE_DATA,    0x00010000},
		{(D_U8)D_NV_PART_CA3,         0x01, 0x00, D_NV_PART_TYPE_DATA,    0x00010000},
		{(D_U8)D_NV_PART_MAIL,        0x01, 0x00, D_NV_PART_TYPE_DATA,    0x00010000},
		{(D_U8)D_NV_PART_ADVERTISE,   0x01, 0x00, D_NV_PART_TYPE_DATA,    0x00030000},
	};
#elif defined(D_FLASH_MAP_4M)
static const D_NVPartCfg def_part_cfg[]=
	{
		{(D_U8)D_NV_PART_APP,         0x01, 0x00, D_NV_PART_TYPE_ZIP_APP, 0x00280000},
		{(D_U8)D_NV_PART_PROG,        0x01, 0x01, D_NV_PART_TYPE_DATA,    0x00010000},
		{(D_U8)D_NV_PART_PROG2,       0x01, 0x01, D_NV_PART_TYPE_DATA,    0x00010000},
		{(D_U8)D_NV_PART_PARAM,       0x01, 0x01, D_NV_PART_TYPE_DATA,    0x00010000},
		{(D_U8)D_NV_PART_BAK,         0x01, 0x00, D_NV_PART_TYPE_DATA,    0x00010000},
		{(D_U8)D_NV_PART_RSET,        0x01, 0x00, D_NV_PART_TYPE_DATA,    0x00010000},
		{(D_U8)D_NV_PART_CA1,         0x01, 0x00, D_NV_PART_TYPE_DATA,    0x00010000},
		{(D_U8)D_NV_PART_CA2,         0x01, 0x00, D_NV_PART_TYPE_DATA,    0x00010000},
		{(D_U8)D_NV_PART_CA3,         0x01, 0x00, D_NV_PART_TYPE_DATA,    0x00010000},
		{(D_U8)D_NV_PART_MAIL,        0x01, 0x00, D_NV_PART_TYPE_DATA,    0x00010000},
		{(D_U8)D_NV_PART_LOGO,		  0x01, 0x00, D_NV_PART_TYPE_DATA,	  0x00010000},
		{(D_U8)D_NV_PART_ADVERTISE,   0x01, 0x00, D_NV_PART_TYPE_DATA,    0x00020000},
	};
#elif defined(D_FLASH_MAP_16M)
static const D_NVPartCfg def_part_cfg[]=
	{
		{(D_U8)D_NV_PART_APP,         0x01, 0x00, D_NV_PART_TYPE_ZIP_APP, 0x00E20000},
		{(D_U8)D_NV_PART_RESERVED,    0x01, 0x00, D_NV_PART_TYPE_DATA,    0x00020000},
		{(D_U8)D_NV_PART_ADVERTISE,   0x01, 0x00, D_NV_PART_TYPE_DATA,    0x00020000},
		{(D_U8)D_NV_PART_PROG,        0x01, 0x01, D_NV_PART_TYPE_DATA,    0x00010000},
		{(D_U8)D_NV_PART_PROG2,       0x01, 0x01, D_NV_PART_TYPE_DATA,    0x00010000},
		{(D_U8)D_NV_PART_PARAM,       0x01, 0x01, D_NV_PART_TYPE_DATA,    0x00010000},
		{(D_U8)D_NV_PART_BAK,         0x01, 0x00, D_NV_PART_TYPE_DATA,    0x00010000},
		{(D_U8)D_NV_PART_CA1,         0x01, 0x00, D_NV_PART_TYPE_DATA,    0x00010000},
		{(D_U8)D_NV_PART_CA2,         0x01, 0x00, D_NV_PART_TYPE_DATA,    0x00010000},
		{(D_U8)D_NV_PART_CA3,         0x01, 0x00, D_NV_PART_TYPE_DATA,    0x00010000},
		{(D_U8)D_NV_PART_MAIL,        0x01, 0x00, D_NV_PART_TYPE_DATA,    0x00010000},
		{(D_U8)D_NV_PART_DATA,        0x01, 0x00, D_NV_PART_TYPE_DATA,    0x00010000},
		{(D_U8)D_NV_PART_RSET,        0x01, 0x00, D_NV_PART_TYPE_DATA,    0x00010000},
		{(D_U8)D_NV_PART_LOGO,        0x01, 0x00, D_NV_PART_TYPE_DATA,    0x00010000},
	};
#elif defined(D_FLASH_MAP_32M)
static const D_NVPartCfg def_part_cfg[]=
	{
		{(D_U8)D_NV_PART_APP,         0x01, 0x00, D_NV_PART_TYPE_ZIP_APP, 0x01200000},
		{(D_U8)D_NV_PART_RESERVED,    0x01, 0x00, D_NV_PART_TYPE_DATA,    0x00020000},
		{(D_U8)D_NV_PART_ADVERTISE,   0x01, 0x00, D_NV_PART_TYPE_DATA,    0x00020000},
		{(D_U8)D_NV_PART_PROG,        0x01, 0x01, D_NV_PART_TYPE_DATA,    0x00010000},
		{(D_U8)D_NV_PART_PROG2,       0x01, 0x01, D_NV_PART_TYPE_DATA,    0x00010000},
		{(D_U8)D_NV_PART_PARAM,       0x01, 0x01, D_NV_PART_TYPE_DATA,    0x00010000},
		{(D_U8)D_NV_PART_BAK,         0x01, 0x00, D_NV_PART_TYPE_DATA,    0x00010000},
		{(D_U8)D_NV_PART_CA1,         0x01, 0x00, D_NV_PART_TYPE_DATA,    0x00010000},
		{(D_U8)D_NV_PART_CA2,         0x01, 0x00, D_NV_PART_TYPE_DATA,    0x00010000},
		{(D_U8)D_NV_PART_CA3,         0x01, 0x00, D_NV_PART_TYPE_DATA,    0x00010000},
		{(D_U8)D_NV_PART_MAIL,        0x01, 0x00, D_NV_PART_TYPE_DATA,    0x00010000},
		{(D_U8)D_NV_PART_DATA,        0x01, 0x00, D_NV_PART_TYPE_DATA,    0x00010000},
		{(D_U8)D_NV_PART_RSET,        0x01, 0x00, D_NV_PART_TYPE_DATA,    0x00010000},
		{(D_U8)D_NV_PART_LOGO,        0x01, 0x00, D_NV_PART_TYPE_DATA,    0x00010000},
	};
#elif defined(D_FLASH_MAP_128M)
static const D_NVPartCfg def_part_cfg[]=
	{
		{(D_U8)D_NV_PART_APP,         0x01, 0x00, D_NV_PART_TYPE_ZIP_APP, 0x03200000},
		{(D_U8)D_NV_PART_RESERVED,    0x01, 0x00, D_NV_PART_TYPE_DATA,    0x00020000},
		{(D_U8)D_NV_PART_ADVERTISE,   0x01, 0x00, D_NV_PART_TYPE_DATA,    0x00020000},
		{(D_U8)D_NV_PART_PROG,        0x01, 0x01, D_NV_PART_TYPE_DATA,    0x00010000},
		{(D_U8)D_NV_PART_PROG2,       0x01, 0x01, D_NV_PART_TYPE_DATA,    0x00010000},
		{(D_U8)D_NV_PART_PARAM,       0x01, 0x01, D_NV_PART_TYPE_DATA,    0x00010000},
		{(D_U8)D_NV_PART_BAK,         0x01, 0x00, D_NV_PART_TYPE_DATA,    0x00010000},
		{(D_U8)D_NV_PART_CA1,         0x01, 0x00, D_NV_PART_TYPE_DATA,    0x00010000},
		{(D_U8)D_NV_PART_CA2,         0x01, 0x00, D_NV_PART_TYPE_DATA,    0x00010000},
		{(D_U8)D_NV_PART_CA3,         0x01, 0x00, D_NV_PART_TYPE_DATA,    0x00010000},
		{(D_U8)D_NV_PART_MAIL,        0x01, 0x00, D_NV_PART_TYPE_DATA,    0x00010000},
		{(D_U8)D_NV_PART_DATA,        0x01, 0x00, D_NV_PART_TYPE_DATA,    0x00010000},
		{(D_U8)D_NV_PART_RSET,        0x01, 0x00, D_NV_PART_TYPE_DATA,    0x00010000},
		{(D_U8)D_NV_PART_LOGO,        0x01, 0x00, D_NV_PART_TYPE_DATA,    0x00010000},
	};
#endif

D_Result app_nvpart_init(void) D_FUNCPOSTFIT
{
	return d_nvpartcfg_set_config(def_part_cfg, sizeof(def_part_cfg) / sizeof(def_part_cfg[0]), p_custom_config_get_app_offset());
}

